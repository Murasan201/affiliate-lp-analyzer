## 前提条件

- **使用目的**: ASPで取り扱う案件のLPを自動分析し、アフィリエイト記事作成に必要な情報を迅速かつ効率的に抽出・提示すること。
- **想定使用者**: ASP案件を紹介し収益化を図るアフィリエイター（個人ブロガー、メディア運営者など）。
- **実装条件**: 言語はPythonのスクリプト形式とし、Google Colaboratoryやローカル環境で実行可能なCLIベース。
- **APIキー設定**: 環境変数 `OPENAI_API_KEY` に事前に設定しておくこと。

## 必須機能カテゴリと具体要件

| カテゴリ                         | 具体要件                                                                                                                |
|:--------------------------------|:------------------------------------------------------------------------------------------------------------------------|
| **URLリスト管理・ジョブキュー** | CSVファイルからURL一括インポート<br>順次／バッチ並列実行の切り替えオプション<br>各URLの進捗（未処理／処理中／完了／エラー）可視化<br>中断後の再開・スキップ機能 |
| **テキスト・構造抽出**          | ヘッドレスブラウザ（Playwright等）による最終レンダリングHTML取得<br>DOMから本文・見出し・CTA・フォーム要素を抽出<br>title／meta description／alt属性／構造化データ抽出 |
| **OpenAI API連携**             | 用途別プロンプトテンプレート管理（ペルソナ用・USP用など）<br>入力文字数超過時のチャンク分割ロジック<br>レート制御＆リトライ（指数バックオフ）<br>モデル選択・temperature／max_tokens設定<br>デフォルトモデル: o4-mini |
| **分析ワークフロー**            | ペルソナ仮説生成<br>USP／競合優位性抽出<br>ベネフィット・訴求キーワード抽出<br>AIDA／PASなどコピー手法のタグ付け<br>記事構成テンプレート組版 |
| **出力・エクスポート**          | 各URLごとのMarkdownレポート生成（見出し・リード・箇条書き）<br>全URLの統合サマリレポート<br>（将来的に）CMS連携／チーム共有リンク発行 |
| **エラー管理・ログ**            | 抽出→プロンプト→API→出力 各ステップの詳細ログ保存<br>抽出失敗やタイムアウトの自動検知＆通知 |
